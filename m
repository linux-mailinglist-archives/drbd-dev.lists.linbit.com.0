Return-Path: <drbd-dev-bounces@lists.linbit.com>
X-Original-To: lists+drbd-dev@lfdr.de
Delivered-To: lists+drbd-dev@lfdr.de
Received: from mail19.linbit.com (mail19.linbit.com [159.69.154.96])
	by mail.lfdr.de (Postfix) with ESMTPS id 3EB5361D7B2
	for <lists+drbd-dev@lfdr.de>; Sat,  5 Nov 2022 07:02:01 +0100 (CET)
Received: from mail19.linbit.com (localhost [127.0.0.1])
	by mail19.linbit.com (LINBIT Mail Daemon) with ESMTP id 2834842178D;
	Sat,  5 Nov 2022 07:02:01 +0100 (CET)
X-Original-To: drbd-dev@lists.linbit.com
Delivered-To: drbd-dev@lists.linbit.com
Received: from ams.source.kernel.org (ams.source.kernel.org [145.40.68.75])
	by mail19.linbit.com (LINBIT Mail Daemon) with ESMTP id 777CE420308
	for <drbd-dev@lists.linbit.com>; Sat,  5 Nov 2022 07:01:30 +0100 (CET)
Received: from smtp.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by ams.source.kernel.org (Postfix) with ESMTPS id 30AA2B830CB;
	Sat,  5 Nov 2022 06:01:30 +0000 (UTC)
Received: by smtp.kernel.org (Postfix) with ESMTPSA id 1FDECC4314B;
	Sat,  5 Nov 2022 06:01:28 +0000 (UTC)
Received: from rostedt by gandalf.local.home with local (Exim 4.96)
	(envelope-from <rostedt@goodmis.org>) id 1orCFg-007Oik-0x;
	Sat, 05 Nov 2022 02:01:56 -0400
Message-ID: <20221105060156.128428980@goodmis.org>
User-Agent: quilt/0.66
Date: Sat, 05 Nov 2022 02:00:31 -0400
From: Steven Rostedt <rostedt@goodmis.org>
To: linux-kernel@vger.kernel.org
References: <20221105060024.598488967@goodmis.org>
MIME-Version: 1.0
Cc: Jens Axboe <axboe@kernel.dk>, Stephen Boyd <sboyd@kernel.org>,
	Linus Torvalds <torvalds@linux-foundation.org>,
	Philipp Reisner <philipp.reisner@linbit.com>, linux-block@vger.kernel.org,
	Lars Ellenberg <lars.ellenberg@linbit.com>,
	Tejun Heo <tj@kernel.org>, cgroups@vger.kernel.org,
	Thomas Gleixner <tglx@linutronix.de>,
	Anna-Maria Gleixner <anna-maria@linutronix.de>,
	Andrew Morton <akpm@linux-foundation.org>,
	Guenter Roeck <linux@roeck-us.net>, drbd-dev@lists.linbit.com
Subject: [Drbd-dev] [PATCH v4a 07/38] timers: block: Use
	timer_shutdown_sync() before freeing timer
X-BeenThere: drbd-dev@lists.linbit.com
X-Mailman-Version: 2.1.11
Precedence: list
List-Id: "*Coordination* of development, patches,
	contributions -- *Questions* \(even to developers\) go to drbd-user,
	please." <drbd-dev.lists.linbit.com>
List-Unsubscribe: <https://lists.linbit.com/mailman/options/drbd-dev>,
	<mailto:drbd-dev-request@lists.linbit.com?subject=unsubscribe>
List-Archive: <http://lists.linbit.com/pipermail/drbd-dev>
List-Post: <mailto:drbd-dev@lists.linbit.com>
List-Help: <mailto:drbd-dev-request@lists.linbit.com?subject=help>
List-Subscribe: <https://lists.linbit.com/mailman/listinfo/drbd-dev>,
	<mailto:drbd-dev-request@lists.linbit.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: drbd-dev-bounces@lists.linbit.com
Errors-To: drbd-dev-bounces@lists.linbit.com

RnJvbTogIlN0ZXZlbiBSb3N0ZWR0IChHb29nbGUpIiA8cm9zdGVkdEBnb29kbWlzLm9yZz4KCkJl
Zm9yZSBhIHRpbWVyIGlzIGZyZWVkLCB0aW1lcl9zaHV0ZG93bl9zeW5jKCkgbXVzdCBiZSBjYWxs
ZWQuCgpMaW5rOiBodHRwczovL2xvcmUua2VybmVsLm9yZy9hbGwvMjAyMjExMDQwNTQwNTMuNDMx
OTIyNjU4QGdvb2RtaXMub3JnLwoKQ2M6IFBoaWxpcHAgUmVpc25lciA8cGhpbGlwcC5yZWlzbmVy
QGxpbmJpdC5jb20+CkNjOiBMYXJzIEVsbGVuYmVyZyA8bGFycy5lbGxlbmJlcmdAbGluYml0LmNv
bT4KQ2M6ICJDaHJpc3RvcGggQsO2aG13YWxkZXIiIDxjaHJpc3RvcGguYm9laG13YWxkZXJAbGlu
Yml0LmNvbT4KQ2M6IEplbnMgQXhib2UgPGF4Ym9lQGtlcm5lbC5kaz4KQ2M6IGRyYmQtZGV2QGxp
c3RzLmxpbmJpdC5jb20KQ2M6IFRlanVuIEhlbyA8dGpAa2VybmVsLm9yZz4KQ2M6IGNncm91cHNA
dmdlci5rZXJuZWwub3JnCkNjOiBsaW51eC1ibG9ja0B2Z2VyLmtlcm5lbC5vcmcKU2lnbmVkLW9m
Zi1ieTogU3RldmVuIFJvc3RlZHQgKEdvb2dsZSkgPHJvc3RlZHRAZ29vZG1pcy5vcmc+Ci0tLQog
YmxvY2svYmxrLWlvY29zdC5jICAgICAgICAgICAgIHwgMiArLQogYmxvY2svYmxrLWlvbGF0ZW5j
eS5jICAgICAgICAgIHwgMiArLQogYmxvY2svYmxrLXRocm90dGxlLmMgICAgICAgICAgIHwgMiAr
LQogYmxvY2sva3liZXItaW9zY2hlZC5jICAgICAgICAgIHwgMiArLQogZHJpdmVycy9ibG9jay9k
cmJkL2RyYmRfbWFpbi5jIHwgMiArLQogZHJpdmVycy9ibG9jay9sb29wLmMgICAgICAgICAgIHwg
MiArLQogZHJpdmVycy9ibG9jay9zdW52ZGMuYyAgICAgICAgIHwgMiArLQogNyBmaWxlcyBjaGFu
Z2VkLCA3IGluc2VydGlvbnMoKyksIDcgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvYmxvY2sv
YmxrLWlvY29zdC5jIGIvYmxvY2svYmxrLWlvY29zdC5jCmluZGV4IDQ5NTM5NjQyNWJhZC4uN2Vk
YzY5NWIzYTNkIDEwMDY0NAotLS0gYS9ibG9jay9ibGstaW9jb3N0LmMKKysrIGIvYmxvY2svYmxr
LWlvY29zdC5jCkBAIC0yODE0LDcgKzI4MTQsNyBAQCBzdGF0aWMgdm9pZCBpb2NfcnFvc19leGl0
KHN0cnVjdCBycV9xb3MgKnJxb3MpCiAJaW9jLT5ydW5uaW5nID0gSU9DX1NUT1A7CiAJc3Bpbl91
bmxvY2tfaXJxKCZpb2MtPmxvY2spOwogCi0JZGVsX3RpbWVyX3N5bmMoJmlvYy0+dGltZXIpOwor
CXRpbWVyX3NodXRkb3duX3N5bmMoJmlvYy0+dGltZXIpOwogCWZyZWVfcGVyY3B1KGlvYy0+cGNw
dV9zdGF0KTsKIAlrZnJlZShpb2MpOwogfQpkaWZmIC0tZ2l0IGEvYmxvY2svYmxrLWlvbGF0ZW5j
eS5jIGIvYmxvY2svYmxrLWlvbGF0ZW5jeS5jCmluZGV4IDU3MWZhOTVhYWZlOS4uYzcwNDlhYjE4
MzEyIDEwMDY0NAotLS0gYS9ibG9jay9ibGstaW9sYXRlbmN5LmMKKysrIGIvYmxvY2svYmxrLWlv
bGF0ZW5jeS5jCkBAIC02NDUsNyArNjQ1LDcgQEAgc3RhdGljIHZvaWQgYmxrY2dfaW9sYXRlbmN5
X2V4aXQoc3RydWN0IHJxX3FvcyAqcnFvcykKIHsKIAlzdHJ1Y3QgYmxrX2lvbGF0ZW5jeSAqYmxr
aW9sYXQgPSBCTEtJT0xBVEVOQ1kocnFvcyk7CiAKLQlkZWxfdGltZXJfc3luYygmYmxraW9sYXQt
PnRpbWVyKTsKKwl0aW1lcl9zaHV0ZG93bl9zeW5jKCZibGtpb2xhdC0+dGltZXIpOwogCWZsdXNo
X3dvcmsoJmJsa2lvbGF0LT5lbmFibGVfd29yayk7CiAJYmxrY2dfZGVhY3RpdmF0ZV9wb2xpY3ko
cnFvcy0+cSwgJmJsa2NnX3BvbGljeV9pb2xhdGVuY3kpOwogCWtmcmVlKGJsa2lvbGF0KTsKZGlm
ZiAtLWdpdCBhL2Jsb2NrL2Jsay10aHJvdHRsZS5jIGIvYmxvY2svYmxrLXRocm90dGxlLmMKaW5k
ZXggODQ3NzIxZGMyYjJiLi4zODc0MGM0ZjUxN2EgMTAwNjQ0Ci0tLSBhL2Jsb2NrL2Jsay10aHJv
dHRsZS5jCisrKyBiL2Jsb2NrL2Jsay10aHJvdHRsZS5jCkBAIC00OTAsNyArNDkwLDcgQEAgc3Rh
dGljIHZvaWQgdGhyb3RsX3BkX2ZyZWUoc3RydWN0IGJsa2dfcG9saWN5X2RhdGEgKnBkKQogewog
CXN0cnVjdCB0aHJvdGxfZ3JwICp0ZyA9IHBkX3RvX3RnKHBkKTsKIAotCWRlbF90aW1lcl9zeW5j
KCZ0Zy0+c2VydmljZV9xdWV1ZS5wZW5kaW5nX3RpbWVyKTsKKwl0aW1lcl9zaHV0ZG93bl9zeW5j
KCZ0Zy0+c2VydmljZV9xdWV1ZS5wZW5kaW5nX3RpbWVyKTsKIAlibGtnX3J3c3RhdF9leGl0KCZ0
Zy0+c3RhdF9ieXRlcyk7CiAJYmxrZ19yd3N0YXRfZXhpdCgmdGctPnN0YXRfaW9zKTsKIAlrZnJl
ZSh0Zyk7CmRpZmYgLS1naXQgYS9ibG9jay9reWJlci1pb3NjaGVkLmMgYi9ibG9jay9reWJlci1p
b3NjaGVkLmMKaW5kZXggYjA1MzU3YmNlZDk5Li4yMTQ2OTY5MjM3YmYgMTAwNjQ0Ci0tLSBhL2Js
b2NrL2t5YmVyLWlvc2NoZWQuYworKysgYi9ibG9jay9reWJlci1pb3NjaGVkLmMKQEAgLTQzNCw3
ICs0MzQsNyBAQCBzdGF0aWMgdm9pZCBreWJlcl9leGl0X3NjaGVkKHN0cnVjdCBlbGV2YXRvcl9x
dWV1ZSAqZSkKIAlzdHJ1Y3Qga3liZXJfcXVldWVfZGF0YSAqa3FkID0gZS0+ZWxldmF0b3JfZGF0
YTsKIAlpbnQgaTsKIAotCWRlbF90aW1lcl9zeW5jKCZrcWQtPnRpbWVyKTsKKwl0aW1lcl9zaHV0
ZG93bl9zeW5jKCZrcWQtPnRpbWVyKTsKIAlibGtfc3RhdF9kaXNhYmxlX2FjY291bnRpbmcoa3Fk
LT5xKTsKIAogCWZvciAoaSA9IDA7IGkgPCBLWUJFUl9OVU1fRE9NQUlOUzsgaSsrKQpkaWZmIC0t
Z2l0IGEvZHJpdmVycy9ibG9jay9kcmJkL2RyYmRfbWFpbi5jIGIvZHJpdmVycy9ibG9jay9kcmJk
L2RyYmRfbWFpbi5jCmluZGV4IGYzZTRkYjE2ZmQwNy4uMmRjNWJlODlhMDAxIDEwMDY0NAotLS0g
YS9kcml2ZXJzL2Jsb2NrL2RyYmQvZHJiZF9tYWluLmMKKysrIGIvZHJpdmVycy9ibG9jay9kcmJk
L2RyYmRfbWFpbi5jCkBAIC0yMTg0LDcgKzIxODQsNyBAQCB2b2lkIGRyYmRfZGVzdHJveV9kZXZp
Y2Uoc3RydWN0IGtyZWYgKmtyZWYpCiAJc3RydWN0IGRyYmRfcmVzb3VyY2UgKnJlc291cmNlID0g
ZGV2aWNlLT5yZXNvdXJjZTsKIAlzdHJ1Y3QgZHJiZF9wZWVyX2RldmljZSAqcGVlcl9kZXZpY2Us
ICp0bXBfcGVlcl9kZXZpY2U7CiAKLQlkZWxfdGltZXJfc3luYygmZGV2aWNlLT5yZXF1ZXN0X3Rp
bWVyKTsKKwl0aW1lcl9zaHV0ZG93bl9zeW5jKCZkZXZpY2UtPnJlcXVlc3RfdGltZXIpOwogCiAJ
LyogcGFyYW5vaWEgYXNzZXJ0cyAqLwogCURfQVNTRVJUKGRldmljZSwgZGV2aWNlLT5vcGVuX2Nu
dCA9PSAwKTsKZGlmZiAtLWdpdCBhL2RyaXZlcnMvYmxvY2svbG9vcC5jIGIvZHJpdmVycy9ibG9j
ay9sb29wLmMKaW5kZXggYWQ5MjE5MmM3ZDYxLi4zZWEwODdjZDFmOTkgMTAwNjQ0Ci0tLSBhL2Ry
aXZlcnMvYmxvY2svbG9vcC5jCisrKyBiL2RyaXZlcnMvYmxvY2svbG9vcC5jCkBAIC0xNzU1LDcg
KzE3NTUsNyBAQCBzdGF0aWMgdm9pZCBsb19mcmVlX2Rpc2soc3RydWN0IGdlbmRpc2sgKmRpc2sp
CiAJaWYgKGxvLT53b3JrcXVldWUpCiAJCWRlc3Ryb3lfd29ya3F1ZXVlKGxvLT53b3JrcXVldWUp
OwogCWxvb3BfZnJlZV9pZGxlX3dvcmtlcnMobG8sIHRydWUpOwotCWRlbF90aW1lcl9zeW5jKCZs
by0+dGltZXIpOworCXRpbWVyX3NodXRkb3duX3N5bmMoJmxvLT50aW1lcik7CiAJbXV0ZXhfZGVz
dHJveSgmbG8tPmxvX211dGV4KTsKIAlrZnJlZShsbyk7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJz
L2Jsb2NrL3N1bnZkYy5jIGIvZHJpdmVycy9ibG9jay9zdW52ZGMuYwppbmRleCBmYjg1NWRhOTcx
ZWUuLmUxNGZlNWQ5NjhkOCAxMDA2NDQKLS0tIGEvZHJpdmVycy9ibG9jay9zdW52ZGMuYworKysg
Yi9kcml2ZXJzL2Jsb2NrL3N1bnZkYy5jCkBAIC0xMDY3LDcgKzEwNjcsNyBAQCBzdGF0aWMgdm9p
ZCB2ZGNfcG9ydF9yZW1vdmUoc3RydWN0IHZpb19kZXYgKnZkZXYpCiAKIAkJZmx1c2hfd29yaygm
cG9ydC0+bGRjX3Jlc2V0X3dvcmspOwogCQljYW5jZWxfZGVsYXllZF93b3JrX3N5bmMoJnBvcnQt
PmxkY19yZXNldF90aW1lcl93b3JrKTsKLQkJZGVsX3RpbWVyX3N5bmMoJnBvcnQtPnZpby50aW1l
cik7CisJCXRpbWVyX3NodXRkb3duX3N5bmMoJnBvcnQtPnZpby50aW1lcik7CiAKIAkJZGVsX2dl
bmRpc2socG9ydC0+ZGlzayk7CiAJCXB1dF9kaXNrKHBvcnQtPmRpc2spOwotLSAKMi4zNS4xCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmRyYmQtZGV2IG1h
aWxpbmcgbGlzdApkcmJkLWRldkBsaXN0cy5saW5iaXQuY29tCmh0dHBzOi8vbGlzdHMubGluYml0
LmNvbS9tYWlsbWFuL2xpc3RpbmZvL2RyYmQtZGV2Cg==
