Return-Path: <drbd-dev-bounces@lists.linbit.com>
X-Original-To: lists+drbd-dev@lfdr.de
Delivered-To: lists+drbd-dev@lfdr.de
Received: from mail19.linbit.com (mail19.linbit.com [159.69.154.96])
	by mail.lfdr.de (Postfix) with ESMTPS id CCE37619096
	for <lists+drbd-dev@lfdr.de>; Fri,  4 Nov 2022 06:58:01 +0100 (CET)
Received: from mail19.linbit.com (localhost [127.0.0.1])
	by mail19.linbit.com (LINBIT Mail Daemon) with ESMTP id B50334203A1;
	Fri,  4 Nov 2022 06:58:01 +0100 (CET)
X-Original-To: drbd-dev@lists.linbit.com
Delivered-To: drbd-dev@lists.linbit.com
Received: from dfw.source.kernel.org (dfw.source.kernel.org [139.178.84.217])
	by mail19.linbit.com (LINBIT Mail Daemon) with ESMTP id F2A3C420237
	for <drbd-dev@lists.linbit.com>;
	Fri,  4 Nov 2022 06:58:00 +0100 (CET)
Received: from smtp.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by dfw.source.kernel.org (Postfix) with ESMTPS id 11ADA620B8;
	Fri,  4 Nov 2022 05:48:47 +0000 (UTC)
Received: by smtp.kernel.org (Postfix) with ESMTPSA id 6E0C8C43143;
	Fri,  4 Nov 2022 05:48:46 +0000 (UTC)
Received: from rostedt by gandalf.local.home with local (Exim 4.96)
	(envelope-from <rostedt@goodmis.org>) id 1oqpZo-007101-2W;
	Fri, 04 Nov 2022 01:49:12 -0400
Message-ID: <20221104054912.617055044@goodmis.org>
User-Agent: quilt/0.66
Date: Fri, 04 Nov 2022 01:40:57 -0400
From: Steven Rostedt <rostedt@goodmis.org>
To: linux-kernel@vger.kernel.org
References: <20221104054053.431922658@goodmis.org>
MIME-Version: 1.0
Cc: Jens Axboe <axboe@kernel.dk>, Stephen Boyd <sboyd@kernel.org>,
	Linus Torvalds <torvalds@linux-foundation.org>,
	Philipp Reisner <philipp.reisner@linbit.com>, linux-block@vger.kernel.org,
	Lars Ellenberg <lars.ellenberg@linbit.com>,
	Tejun Heo <tj@kernel.org>, cgroups@vger.kernel.org,
	Thomas Gleixner <tglx@linutronix.de>,
	Anna-Maria Gleixner <anna-maria@linutronix.de>,
	Andrew Morton <akpm@linux-foundation.org>,
	Guenter Roeck <linux@roeck-us.net>, drbd-dev@lists.linbit.com
Subject: [Drbd-dev] [RFC][PATCH v3 04/33] timers: block: Use
	timer_shutdown_sync() before freeing timer
X-BeenThere: drbd-dev@lists.linbit.com
X-Mailman-Version: 2.1.11
Precedence: list
List-Id: "*Coordination* of development, patches,
	contributions -- *Questions* \(even to developers\) go to drbd-user,
	please." <drbd-dev.lists.linbit.com>
List-Unsubscribe: <https://lists.linbit.com/mailman/options/drbd-dev>,
	<mailto:drbd-dev-request@lists.linbit.com?subject=unsubscribe>
List-Archive: <http://lists.linbit.com/pipermail/drbd-dev>
List-Post: <mailto:drbd-dev@lists.linbit.com>
List-Help: <mailto:drbd-dev-request@lists.linbit.com?subject=help>
List-Subscribe: <https://lists.linbit.com/mailman/listinfo/drbd-dev>,
	<mailto:drbd-dev-request@lists.linbit.com?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: drbd-dev-bounces@lists.linbit.com
Errors-To: drbd-dev-bounces@lists.linbit.com

RnJvbTogIlN0ZXZlbiBSb3N0ZWR0IChHb29nbGUpIiA8cm9zdGVkdEBnb29kbWlzLm9yZz4KCkJl
Zm9yZSBhIHRpbWVyIGlzIGZyZWVkLCB0aW1lcl9zaHV0ZG93bl9zeW5jKCkgbXVzdCBiZSBjYWxs
ZWQuCgpMaW5rOiBodHRwczovL2xvcmUua2VybmVsLm9yZy9hbGwvMjAyMjA0MDcxNjE3NDUuN2Q2
NzU0YjNAZ2FuZGFsZi5sb2NhbC5ob21lLwoKQ2M6IFBoaWxpcHAgUmVpc25lciA8cGhpbGlwcC5y
ZWlzbmVyQGxpbmJpdC5jb20+CkNjOiBMYXJzIEVsbGVuYmVyZyA8bGFycy5lbGxlbmJlcmdAbGlu
Yml0LmNvbT4KQ2M6ICJDaHJpc3RvcGggQsO2aG13YWxkZXIiIDxjaHJpc3RvcGguYm9laG13YWxk
ZXJAbGluYml0LmNvbT4KQ2M6IEplbnMgQXhib2UgPGF4Ym9lQGtlcm5lbC5kaz4KQ2M6IGRyYmQt
ZGV2QGxpc3RzLmxpbmJpdC5jb20KQ2M6IFRlanVuIEhlbyA8dGpAa2VybmVsLm9yZz4KQ2M6IGNn
cm91cHNAdmdlci5rZXJuZWwub3JnCkNjOiBsaW51eC1ibG9ja0B2Z2VyLmtlcm5lbC5vcmcKU2ln
bmVkLW9mZi1ieTogU3RldmVuIFJvc3RlZHQgKEdvb2dsZSkgPHJvc3RlZHRAZ29vZG1pcy5vcmc+
Ci0tLQogYmxvY2svYmxrLWlvY29zdC5jICAgICAgICAgICAgIHwgMiArLQogYmxvY2svYmxrLWlv
bGF0ZW5jeS5jICAgICAgICAgIHwgMiArLQogYmxvY2svYmxrLXN0YXQuYyAgICAgICAgICAgICAg
IHwgMiArLQogYmxvY2svYmxrLXRocm90dGxlLmMgICAgICAgICAgIHwgMiArLQogYmxvY2sva3li
ZXItaW9zY2hlZC5jICAgICAgICAgIHwgMiArLQogZHJpdmVycy9ibG9jay9kcmJkL2RyYmRfbWFp
bi5jIHwgMiArLQogZHJpdmVycy9ibG9jay9sb29wLmMgICAgICAgICAgIHwgMiArLQogZHJpdmVy
cy9ibG9jay9zdW52ZGMuYyAgICAgICAgIHwgMiArLQogOCBmaWxlcyBjaGFuZ2VkLCA4IGluc2Vy
dGlvbnMoKyksIDggZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvYmxvY2svYmxrLWlvY29zdC5j
IGIvYmxvY2svYmxrLWlvY29zdC5jCmluZGV4IDQ5NTM5NjQyNWJhZC4uN2VkYzY5NWIzYTNkIDEw
MDY0NAotLS0gYS9ibG9jay9ibGstaW9jb3N0LmMKKysrIGIvYmxvY2svYmxrLWlvY29zdC5jCkBA
IC0yODE0LDcgKzI4MTQsNyBAQCBzdGF0aWMgdm9pZCBpb2NfcnFvc19leGl0KHN0cnVjdCBycV9x
b3MgKnJxb3MpCiAJaW9jLT5ydW5uaW5nID0gSU9DX1NUT1A7CiAJc3Bpbl91bmxvY2tfaXJxKCZp
b2MtPmxvY2spOwogCi0JZGVsX3RpbWVyX3N5bmMoJmlvYy0+dGltZXIpOworCXRpbWVyX3NodXRk
b3duX3N5bmMoJmlvYy0+dGltZXIpOwogCWZyZWVfcGVyY3B1KGlvYy0+cGNwdV9zdGF0KTsKIAlr
ZnJlZShpb2MpOwogfQpkaWZmIC0tZ2l0IGEvYmxvY2svYmxrLWlvbGF0ZW5jeS5jIGIvYmxvY2sv
YmxrLWlvbGF0ZW5jeS5jCmluZGV4IDU3MWZhOTVhYWZlOS4uYzcwNDlhYjE4MzEyIDEwMDY0NAot
LS0gYS9ibG9jay9ibGstaW9sYXRlbmN5LmMKKysrIGIvYmxvY2svYmxrLWlvbGF0ZW5jeS5jCkBA
IC02NDUsNyArNjQ1LDcgQEAgc3RhdGljIHZvaWQgYmxrY2dfaW9sYXRlbmN5X2V4aXQoc3RydWN0
IHJxX3FvcyAqcnFvcykKIHsKIAlzdHJ1Y3QgYmxrX2lvbGF0ZW5jeSAqYmxraW9sYXQgPSBCTEtJ
T0xBVEVOQ1kocnFvcyk7CiAKLQlkZWxfdGltZXJfc3luYygmYmxraW9sYXQtPnRpbWVyKTsKKwl0
aW1lcl9zaHV0ZG93bl9zeW5jKCZibGtpb2xhdC0+dGltZXIpOwogCWZsdXNoX3dvcmsoJmJsa2lv
bGF0LT5lbmFibGVfd29yayk7CiAJYmxrY2dfZGVhY3RpdmF0ZV9wb2xpY3kocnFvcy0+cSwgJmJs
a2NnX3BvbGljeV9pb2xhdGVuY3kpOwogCWtmcmVlKGJsa2lvbGF0KTsKZGlmZiAtLWdpdCBhL2Js
b2NrL2Jsay1zdGF0LmMgYi9ibG9jay9ibGstc3RhdC5jCmluZGV4IDJlYTAxYjVjMWFjYS4uODU1
ZGEyMWRlNWRjIDEwMDY0NAotLS0gYS9ibG9jay9ibGstc3RhdC5jCisrKyBiL2Jsb2NrL2Jsay1z
dGF0LmMKQEAgLTE2NSw3ICsxNjUsNyBAQCB2b2lkIGJsa19zdGF0X3JlbW92ZV9jYWxsYmFjayhz
dHJ1Y3QgcmVxdWVzdF9xdWV1ZSAqcSwKIAkJYmxrX3F1ZXVlX2ZsYWdfY2xlYXIoUVVFVUVfRkxB
R19TVEFUUywgcSk7CiAJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmcS0+c3RhdHMtPmxvY2ssIGZs
YWdzKTsKIAotCWRlbF90aW1lcl9zeW5jKCZjYi0+dGltZXIpOworCXRpbWVyX3NodXRkb3duX3N5
bmMoJmNiLT50aW1lcik7CiB9CiAKIHN0YXRpYyB2b2lkIGJsa19zdGF0X2ZyZWVfY2FsbGJhY2tf
cmN1KHN0cnVjdCByY3VfaGVhZCAqaGVhZCkKZGlmZiAtLWdpdCBhL2Jsb2NrL2Jsay10aHJvdHRs
ZS5jIGIvYmxvY2svYmxrLXRocm90dGxlLmMKaW5kZXggODQ3NzIxZGMyYjJiLi4zODc0MGM0ZjUx
N2EgMTAwNjQ0Ci0tLSBhL2Jsb2NrL2Jsay10aHJvdHRsZS5jCisrKyBiL2Jsb2NrL2Jsay10aHJv
dHRsZS5jCkBAIC00OTAsNyArNDkwLDcgQEAgc3RhdGljIHZvaWQgdGhyb3RsX3BkX2ZyZWUoc3Ry
dWN0IGJsa2dfcG9saWN5X2RhdGEgKnBkKQogewogCXN0cnVjdCB0aHJvdGxfZ3JwICp0ZyA9IHBk
X3RvX3RnKHBkKTsKIAotCWRlbF90aW1lcl9zeW5jKCZ0Zy0+c2VydmljZV9xdWV1ZS5wZW5kaW5n
X3RpbWVyKTsKKwl0aW1lcl9zaHV0ZG93bl9zeW5jKCZ0Zy0+c2VydmljZV9xdWV1ZS5wZW5kaW5n
X3RpbWVyKTsKIAlibGtnX3J3c3RhdF9leGl0KCZ0Zy0+c3RhdF9ieXRlcyk7CiAJYmxrZ19yd3N0
YXRfZXhpdCgmdGctPnN0YXRfaW9zKTsKIAlrZnJlZSh0Zyk7CmRpZmYgLS1naXQgYS9ibG9jay9r
eWJlci1pb3NjaGVkLmMgYi9ibG9jay9reWJlci1pb3NjaGVkLmMKaW5kZXggYjA1MzU3YmNlZDk5
Li4yMTQ2OTY5MjM3YmYgMTAwNjQ0Ci0tLSBhL2Jsb2NrL2t5YmVyLWlvc2NoZWQuYworKysgYi9i
bG9jay9reWJlci1pb3NjaGVkLmMKQEAgLTQzNCw3ICs0MzQsNyBAQCBzdGF0aWMgdm9pZCBreWJl
cl9leGl0X3NjaGVkKHN0cnVjdCBlbGV2YXRvcl9xdWV1ZSAqZSkKIAlzdHJ1Y3Qga3liZXJfcXVl
dWVfZGF0YSAqa3FkID0gZS0+ZWxldmF0b3JfZGF0YTsKIAlpbnQgaTsKIAotCWRlbF90aW1lcl9z
eW5jKCZrcWQtPnRpbWVyKTsKKwl0aW1lcl9zaHV0ZG93bl9zeW5jKCZrcWQtPnRpbWVyKTsKIAli
bGtfc3RhdF9kaXNhYmxlX2FjY291bnRpbmcoa3FkLT5xKTsKIAogCWZvciAoaSA9IDA7IGkgPCBL
WUJFUl9OVU1fRE9NQUlOUzsgaSsrKQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9ibG9jay9kcmJkL2Ry
YmRfbWFpbi5jIGIvZHJpdmVycy9ibG9jay9kcmJkL2RyYmRfbWFpbi5jCmluZGV4IGYzZTRkYjE2
ZmQwNy4uMmRjNWJlODlhMDAxIDEwMDY0NAotLS0gYS9kcml2ZXJzL2Jsb2NrL2RyYmQvZHJiZF9t
YWluLmMKKysrIGIvZHJpdmVycy9ibG9jay9kcmJkL2RyYmRfbWFpbi5jCkBAIC0yMTg0LDcgKzIx
ODQsNyBAQCB2b2lkIGRyYmRfZGVzdHJveV9kZXZpY2Uoc3RydWN0IGtyZWYgKmtyZWYpCiAJc3Ry
dWN0IGRyYmRfcmVzb3VyY2UgKnJlc291cmNlID0gZGV2aWNlLT5yZXNvdXJjZTsKIAlzdHJ1Y3Qg
ZHJiZF9wZWVyX2RldmljZSAqcGVlcl9kZXZpY2UsICp0bXBfcGVlcl9kZXZpY2U7CiAKLQlkZWxf
dGltZXJfc3luYygmZGV2aWNlLT5yZXF1ZXN0X3RpbWVyKTsKKwl0aW1lcl9zaHV0ZG93bl9zeW5j
KCZkZXZpY2UtPnJlcXVlc3RfdGltZXIpOwogCiAJLyogcGFyYW5vaWEgYXNzZXJ0cyAqLwogCURf
QVNTRVJUKGRldmljZSwgZGV2aWNlLT5vcGVuX2NudCA9PSAwKTsKZGlmZiAtLWdpdCBhL2RyaXZl
cnMvYmxvY2svbG9vcC5jIGIvZHJpdmVycy9ibG9jay9sb29wLmMKaW5kZXggYWQ5MjE5MmM3ZDYx
Li4zZWEwODdjZDFmOTkgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvYmxvY2svbG9vcC5jCisrKyBiL2Ry
aXZlcnMvYmxvY2svbG9vcC5jCkBAIC0xNzU1LDcgKzE3NTUsNyBAQCBzdGF0aWMgdm9pZCBsb19m
cmVlX2Rpc2soc3RydWN0IGdlbmRpc2sgKmRpc2spCiAJaWYgKGxvLT53b3JrcXVldWUpCiAJCWRl
c3Ryb3lfd29ya3F1ZXVlKGxvLT53b3JrcXVldWUpOwogCWxvb3BfZnJlZV9pZGxlX3dvcmtlcnMo
bG8sIHRydWUpOwotCWRlbF90aW1lcl9zeW5jKCZsby0+dGltZXIpOworCXRpbWVyX3NodXRkb3du
X3N5bmMoJmxvLT50aW1lcik7CiAJbXV0ZXhfZGVzdHJveSgmbG8tPmxvX211dGV4KTsKIAlrZnJl
ZShsbyk7CiB9CmRpZmYgLS1naXQgYS9kcml2ZXJzL2Jsb2NrL3N1bnZkYy5jIGIvZHJpdmVycy9i
bG9jay9zdW52ZGMuYwppbmRleCBmYjg1NWRhOTcxZWUuLmUxNGZlNWQ5NjhkOCAxMDA2NDQKLS0t
IGEvZHJpdmVycy9ibG9jay9zdW52ZGMuYworKysgYi9kcml2ZXJzL2Jsb2NrL3N1bnZkYy5jCkBA
IC0xMDY3LDcgKzEwNjcsNyBAQCBzdGF0aWMgdm9pZCB2ZGNfcG9ydF9yZW1vdmUoc3RydWN0IHZp
b19kZXYgKnZkZXYpCiAKIAkJZmx1c2hfd29yaygmcG9ydC0+bGRjX3Jlc2V0X3dvcmspOwogCQlj
YW5jZWxfZGVsYXllZF93b3JrX3N5bmMoJnBvcnQtPmxkY19yZXNldF90aW1lcl93b3JrKTsKLQkJ
ZGVsX3RpbWVyX3N5bmMoJnBvcnQtPnZpby50aW1lcik7CisJCXRpbWVyX3NodXRkb3duX3N5bmMo
JnBvcnQtPnZpby50aW1lcik7CiAKIAkJZGVsX2dlbmRpc2socG9ydC0+ZGlzayk7CiAJCXB1dF9k
aXNrKHBvcnQtPmRpc2spOwotLSAKMi4zNS4xCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmRyYmQtZGV2IG1haWxpbmcgbGlzdApkcmJkLWRldkBsaXN0cy5s
aW5iaXQuY29tCmh0dHBzOi8vbGlzdHMubGluYml0LmNvbS9tYWlsbWFuL2xpc3RpbmZvL2RyYmQt
ZGV2Cg==
